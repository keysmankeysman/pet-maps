import{r as j,w as J,aZ as P,aN as M,o as p,k as t,c as e,b as V,J as i,j as r,F as y,f as _,h as b,t as k,V as f,$ as O}from"./index-BnWVQCIz.js";import{V as L}from"./VForm-D7tRfmBl.js";import{V as n}from"./VTextField-B1mO6X2y.js";import{V as U,a as R}from"./VDivider-Cvu_kD5s.js";import{V as C,a as Z,b as z}from"./index-CuROVMUf.js";const A={class:"d-flex justify-space-between align-center mb-2"},X={__name:"EditCityForm",props:["city"],emits:["update"],setup(N,{emit:g}){const q=g,v=N,s=j([]);s.value=JSON.parse(JSON.stringify(v.city));const w=d=>{q("update",d)};J(s,d=>{w(d)},{immediate:!0});function E(){return{id:Date.now()+Math.random(),name:"",address:"",cityId:v.city.id,countryId:43,neededEmployees:0,countEmployee:0,employees:[]}}function D(){return{id:Date.now()+Math.random(),name:"",position:""}}const S=()=>{s.value.shops.push(E())},B=d=>{s.value.shops[d].employees.push(D())},F=d=>{s.value.shops.splice(d,1)},x=(d,l)=>{s.value.shops[d].employees.splice(l,1)},T=[d=>!!d||"Phone number is required",d=>d.replace(/\D/g,"").length===11||"Phone number must be complete"];return(d,l)=>{const $=P("mask");return p(),M(R,{class:"pa-4","max-width":"800"},{default:t(()=>[e(L,null,{default:t(()=>[e(i,null,{default:t(()=>[...l[1]||(l[1]=[r("mdi-city",-1)])]),_:1}),e(n,{modelValue:s.value.name,"onUpdate:modelValue":l[0]||(l[0]=o=>s.value.name=o),label:"Город",rules:[o=>!!o||"Введите название города"],required:""},null,8,["modelValue","rules"]),e(U,{class:"my-4"}),(p(!0),V(y,null,_(s.value.shops,(o,m)=>(p(),V("div",{key:o.id,class:"mb-6"},[e(C,{outlined:""},{default:t(()=>[e(Z,{class:"d-flex justify-space-between align-center"},{default:t(()=>[b("div",null,[e(i,null,{default:t(()=>[...l[2]||(l[2]=[r("mdi-store",-1)])]),_:1}),r(" Магазин "+k(m+1),1)]),e(f,{icon:"",color:"red",onClick:a=>F(m),"aria-label":"Удалить магазин "+(m+1)},{default:t(()=>[e(i,null,{default:t(()=>[...l[3]||(l[3]=[r("mdi-close",-1)])]),_:1})]),_:1},8,["onClick","aria-label"])]),_:2},1024),e(z,null,{default:t(()=>[e(n,{modelValue:o.name,"onUpdate:modelValue":a=>o.name=a,label:"Название",rules:[a=>!!a||"Введите навание магазина"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),e(n,{modelValue:o.address,"onUpdate:modelValue":a=>o.address=a,label:"Название",rules:[a=>!!a||"Введите адрес магазина"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),e(n,{type:"number",modelValue:o.neededEmployees,"onUpdate:modelValue":a=>o.neededEmployees=a,label:"Необходимо сотрудников",rules:[a=>!!a||"Введите количество необходимых сотрудников"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),e(U,{class:"my-3"}),(p(!0),V(y,null,_(o.employees,(a,c)=>(p(),V("div",{key:a.id,class:"mb-4"},[e(C,{outlined:"",class:"pa-3"},{default:t(()=>[b("div",A,[b("div",null,[e(i,null,{default:t(()=>[...l[4]||(l[4]=[r("mdi-account-tie",-1)])]),_:1}),r("Сотрудник "+k(c+1),1)]),e(f,{icon:"",color:"red",onClick:u=>x(m,c),"aria-label":"Удалить сотрудника "+(c+1)},{default:t(()=>[e(i,null,{default:t(()=>[...l[5]||(l[5]=[r("mdi-close",-1)])]),_:1})]),_:1},8,["onClick","aria-label"])]),e(n,{modelValue:a.firstName,"onUpdate:modelValue":u=>a.firstName=u,label:"Имя",rules:[u=>!!u||"Введите имя сотрудника"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),e(n,{modelValue:a.lastName,"onUpdate:modelValue":u=>a.lastName=u,label:"Фамилия",rules:[u=>!!u||"Введите фамилию сотрудника"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),e(n,{modelValue:a.middleName,"onUpdate:modelValue":u=>a.middleName=u,label:"Отчество",rules:[u=>!!u||"Введите отчество сотрудника"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),O(e(n,{modelValue:a.phone,"onUpdate:modelValue":u=>a.phone=u,label:"Phone Number",rules:T,required:"",placeholder:"+7 (___) ___-__-__"},null,8,["modelValue","onUpdate:modelValue"]),[[$,"+7 (###) ###-##-##"]])]),_:2},1024)]))),128)),e(f,{color:"primary",text:"",onClick:a=>B(m)},{default:t(()=>[e(i,{left:""},{default:t(()=>[...l[6]||(l[6]=[r("mdi-plus",-1)])]),_:1}),l[7]||(l[7]=r(" Добавить сотрудника ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),e(f,{color:"primary",class:"mb-4",onClick:S},{default:t(()=>[e(i,{left:""},{default:t(()=>[...l[8]||(l[8]=[r("mdi-plus",-1)])]),_:1}),l[9]||(l[9]=r(" Добавить магазин ",-1))]),_:1})]),_:1})]),_:1})}}};export{X as default};
