import{r as n,w as B,a_ as F,aN as b,o as m,k as o,c as s,aT as g,u as x,b as U,F as T,f as I,h as N,$ as J,t as S,V as _,J as C,j as p}from"./index-DIPjDtum.js";import{V as j,a as r}from"./VTextField-BSgBxEgu.js";import{b as O,V as R}from"./index-D4JP0ees.js";import{V as L,a as w}from"./VDivider-C5uk2Zeg.js";const $={class:"d-flex justify-space-between align-center mb-2"},K={__name:"EditEmployeerForm",props:["shop"],emits:["update","addEmployee"],setup(y,{emit:D}){const h=D,f=y,V=n(null),a=n([]);let u=n(""),i=n(!1);u=f.shop.name,a.value=JSON.parse(JSON.stringify(f.shop.employees)),B(a,()=>{if(!V.value){h("update",{...a.value,valid:!1});return}V.value.validate().then(d=>{h("update",{...a.value,valid:d})})},{deep:!0,immediate:!0});const k=()=>{a.value.push({id:a.value.length+1,firstName:"",lastName:"",middleName:"",phone:"",shopId:f.shop.id})},E=d=>{if(a.value.length<=1){a.value[0].firstName="",a.value[0].lastName="",a.value[0].middleName="",a.value[0].phone="";return}const l=a.value.findIndex(v=>v.id===d);a.value.splice(l,1)},q=[d=>!!d||"Номер телефона является обязательным",d=>d.replace(/\D/g,"").length===11||"Номер телефона должен быть корректным"];return(d,l)=>{const v=F("mask");return a.value.length?(m(),b(w,{key:0,class:"pa-4","max-width":"800"},{default:o(()=>[s(j,{ref_key:"form",ref:V,modelValue:x(i),"onUpdate:modelValue":l[2]||(l[2]=e=>g(i)?i.value=e:i=e)},{default:o(()=>[s(O,null,{default:o(()=>[s(r,{modelValue:x(u),"onUpdate:modelValue":l[0]||(l[0]=e=>g(u)?u.value=e:u=e),label:"Название магазина",rules:[e=>!!e||"Введите название магазина"],required:""},null,8,["modelValue","rules"]),s(L,{class:"my-3"}),(m(!0),U(T,null,I(a.value,(e,c)=>(m(),U("div",{key:e.id,class:"mb-4"},[s(R,{outlined:"",class:"pa-3"},{default:o(()=>[N("div",$,[N("div",null,[N("b",null,"Сотрудник "+S(c+1),1)]),s(_,{icon:"",color:"red",onClick:t=>E(d.shopIndex,c),"aria-label":"Удалить сотрудника "+(c+1)},{default:o(()=>[s(C,null,{default:o(()=>[...l[3]||(l[3]=[p("mdi-close",-1)])]),_:1})]),_:1},8,["onClick","aria-label"])]),s(r,{modelValue:e.firstName,"onUpdate:modelValue":t=>e.firstName=t,label:"Имя",rules:[t=>!!t||"Введите имя сотрудника"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),s(r,{modelValue:e.lastName,"onUpdate:modelValue":t=>e.lastName=t,label:"Фамилия",rules:[t=>!!t||"Введите фамилию сотрудника"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),s(r,{modelValue:e.middleName,"onUpdate:modelValue":t=>e.middleName=t,label:"Отчество",rules:[t=>!!t||"Введите отчество сотрудника"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),J(s(r,{modelValue:e.phone,"onUpdate:modelValue":t=>e.phone=t,label:"Номер телефона",rules:q,required:"",placeholder:"+7 (___) ___-__-__"},null,8,["modelValue","onUpdate:modelValue"]),[[v,"+7 (###) ###-##-##"]])]),_:2},1024)]))),128)),s(_,{color:"primary",text:"",onClick:l[1]||(l[1]=e=>k(d.shopIndex))},{default:o(()=>[s(C,{left:""},{default:o(()=>[...l[4]||(l[4]=[p("mdi-plus",-1)])]),_:1}),l[5]||(l[5]=p(" Добавить сотрудника ",-1))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):(m(),b(w,{key:1,class:"pa-4","max-width":"800"},{default:o(()=>[l[6]||(l[6]=p(" Нет сотрудников ",-1)),s(_,{class:"ms-auto",onClick:k,text:"Добавить"})]),_:1}))}}};export{K as default};
