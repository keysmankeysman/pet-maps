import{r as N,w as D,aZ as E,aN as h,o as n,k as d,c as t,b,aT as y,u as B,F,f as T,h as f,$ as I,t as J,V as c,J as _,j as i}from"./index-BnWVQCIz.js";import{b as P,V as S}from"./index-CuROVMUf.js";import{V as r}from"./VTextField-B1mO6X2y.js";import{V as j,a as k}from"./VDivider-Cvu_kD5s.js";const O={class:"d-flex justify-space-between align-center mb-2"},z={__name:"EditEmployeerForm",props:["shop"],emits:["update","addEmployee"],setup(g,{emit:x}){const U=x,m=g,s=N([]);let u=N("");u=m.shop.name,s.value=JSON.parse(JSON.stringify(m.shop.employees));const C=o=>{U("update",o)};D(s,o=>{C(o)},{immediate:!0});const v=()=>{s.value.push({id:s.value.length+1,firstName:"",lastName:"",middleName:"",phone:"",shopId:m.shop.id})},w=o=>{if(s.value.length<=1){s.value[0].firstName="",s.value[0].lastName="",s.value[0].middleName="",s.value[0].phone="";return}const e=s.value.findIndex(p=>p.id===o);console.log("index",e),s.value.splice(e,1)},q=[o=>!!o||"Phone number is required",o=>o.replace(/\D/g,"").length===11||"Phone number must be complete"];return(o,e)=>{const p=E("mask");return s.value.length?(n(),h(k,{key:0,class:"pa-4","max-width":"800"},{default:d(()=>[t(P,null,{default:d(()=>[t(r,{modelValue:B(u),"onUpdate:modelValue":e[0]||(e[0]=l=>y(u)?u.value=l:u=l),label:"Название магазина",rules:[l=>!!l||"Введите название магазина"],required:""},null,8,["modelValue","rules"]),t(j,{class:"my-3"}),(n(!0),b(F,null,T(s.value,(l,V)=>(n(),b("div",{key:l.id,class:"mb-4"},[t(S,{outlined:"",class:"pa-3"},{default:d(()=>[f("div",O,[f("div",null,[f("b",null,"Сотрудник "+J(V+1),1)]),t(c,{icon:"",color:"red",onClick:a=>w(o.shopIndex,V),"aria-label":"Удалить сотрудника "+(V+1)},{default:d(()=>[t(_,null,{default:d(()=>[...e[2]||(e[2]=[i("mdi-close",-1)])]),_:1})]),_:1},8,["onClick","aria-label"])]),t(r,{modelValue:l.firstName,"onUpdate:modelValue":a=>l.firstName=a,label:"Имя",rules:[a=>!!a||"Введите имя сотрудника"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),t(r,{modelValue:l.lastName,"onUpdate:modelValue":a=>l.lastName=a,label:"Фамилия",rules:[a=>!!a||"Введите фамилию сотрудника"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),t(r,{modelValue:l.middleName,"onUpdate:modelValue":a=>l.middleName=a,label:"Отчество",rules:[a=>!!a||"Введите отчество сотрудника"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),I(t(r,{modelValue:l.phone,"onUpdate:modelValue":a=>l.phone=a,label:"Phone Number",rules:q,required:"",placeholder:"+7 (___) ___-__-__"},null,8,["modelValue","onUpdate:modelValue"]),[[p,"+7 (###) ###-##-##"]])]),_:2},1024)]))),128)),t(c,{color:"primary",text:"",onClick:e[1]||(e[1]=l=>v(o.shopIndex))},{default:d(()=>[t(_,{left:""},{default:d(()=>[...e[3]||(e[3]=[i("mdi-plus",-1)])]),_:1}),e[4]||(e[4]=i(" Добавить сотрудника ",-1))]),_:1})]),_:1})]),_:1})):(n(),h(k,{key:1,class:"pa-4","max-width":"800"},{default:d(()=>[e[5]||(e[5]=i(" Нет сотрудников ",-1)),t(c,{class:"ms-auto",onClick:v,text:"Добавить"})]),_:1}))}}};export{z as default};
