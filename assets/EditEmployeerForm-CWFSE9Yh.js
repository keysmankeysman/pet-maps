import{r as N,w as D,aH as E,aC as h,o as n,aj as d,I as t,d as b,s as y,u as B,F,f as I,j as f,ag as j,t as P,ai as i}from"./index-Dd6ipkq2.js";import{d as S,V as T,b as c,c as _}from"./index-MWGb9DED.js";import{V as r}from"./VTextField-DJ1GsVVt.js";import{V as J,a as g}from"./VDivider-BuhZx8g-.js";const O={class:"d-flex justify-space-between align-center mb-2"},z={__name:"EditEmployeerForm",props:["shop"],emits:["update","addEmployee"],setup(k,{emit:x}){const C=x,m=k,s=N([]);let u=N("");u=m.shop.name,s.value=JSON.parse(JSON.stringify(m.shop.employees));const U=o=>{C("update",o)};D(s,o=>{U(o)},{immediate:!0});const v=()=>{s.value.push({id:s.value.length+1,firstName:"",lastName:"",middleName:"",phone:"",shopId:m.shop.id})},w=o=>{if(s.value.length<=1){s.value[0].firstName="",s.value[0].lastName="",s.value[0].middleName="",s.value[0].phone="";return}const e=s.value.findIndex(p=>p.id===o);console.log("index",e),s.value.splice(e,1)},q=[o=>!!o||"Phone number is required",o=>o.replace(/\D/g,"").length===11||"Phone number must be complete"];return(o,e)=>{const p=E("mask");return s.value.length?(n(),h(g,{key:0,class:"pa-4","max-width":"800"},{default:d(()=>[t(S,null,{default:d(()=>[t(r,{modelValue:B(u),"onUpdate:modelValue":e[0]||(e[0]=l=>y(u)?u.value=l:u=l),label:"Название магазина",rules:[l=>!!l||"Введите название магазина"],required:""},null,8,["modelValue","rules"]),t(J,{class:"my-3"}),(n(!0),b(F,null,I(s.value,(l,V)=>(n(),b("div",{key:l.id,class:"mb-4"},[t(T,{outlined:"",class:"pa-3"},{default:d(()=>[f("div",O,[f("div",null,[f("b",null,"Сотрудник "+P(V+1),1)]),t(c,{icon:"",color:"red",onClick:a=>w(o.shopIndex,V),"aria-label":"Удалить сотрудника "+(V+1)},{default:d(()=>[t(_,null,{default:d(()=>[...e[2]||(e[2]=[i("mdi-close",-1)])]),_:1})]),_:1},8,["onClick","aria-label"])]),t(r,{modelValue:l.firstName,"onUpdate:modelValue":a=>l.firstName=a,label:"Имя",rules:[a=>!!a||"Введите имя сотрудника"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),t(r,{modelValue:l.lastName,"onUpdate:modelValue":a=>l.lastName=a,label:"Фамилия",rules:[a=>!!a||"Введите фамилию сотрудника"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),t(r,{modelValue:l.middleName,"onUpdate:modelValue":a=>l.middleName=a,label:"Отчество",rules:[a=>!!a||"Введите отчество сотрудника"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),j(t(r,{modelValue:l.phone,"onUpdate:modelValue":a=>l.phone=a,label:"Phone Number",rules:q,required:"",placeholder:"+7 (___) ___-__-__"},null,8,["modelValue","onUpdate:modelValue"]),[[p,"+7 (###) ###-##-##"]])]),_:2},1024)]))),128)),t(c,{color:"primary",text:"",onClick:e[1]||(e[1]=l=>v(o.shopIndex))},{default:d(()=>[t(_,{left:""},{default:d(()=>[...e[3]||(e[3]=[i("mdi-plus",-1)])]),_:1}),e[4]||(e[4]=i(" Добавить сотрудника ",-1))]),_:1})]),_:1})]),_:1})):(n(),h(g,{key:1,class:"pa-4","max-width":"800"},{default:d(()=>[e[5]||(e[5]=i(" Нет сотрудников ",-1)),t(c,{class:"ms-auto",onClick:v,text:"Добавить"})]),_:1}))}}};export{z as default};
