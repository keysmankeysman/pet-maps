import{r as y,w as M,a_ as O,aN as R,o as p,k as t,c as e,aT as L,u as P,b as f,J as i,j as s,F as C,f as N,h as _,t as g,V as c,$ as z}from"./index-DIPjDtum.js";import{V as A,a as n}from"./VTextField-BSgBxEgu.js";import{V as w,a as G}from"./VDivider-C5uk2Zeg.js";import{V as E,a as H,b as K}from"./index-D4JP0ees.js";const Q={class:"d-flex justify-space-between align-center mb-2"},I={__name:"EditCityForm",props:["city"],emits:["update"],setup(q,{emit:D}){const k=D,U=q,r=y([]),v=y(null);let V=y(!1);r.value=JSON.parse(JSON.stringify(U.city)),M(r,()=>{if(!v.value){k("update",{...r.value,valid:!1});return}v.value.validate().then(o=>{k("update",{...r.value,valid:o})})},{deep:!0,immediate:!0});function S(){return{id:Date.now()+Math.random(),name:"",address:"",cityId:U.city.id,countryId:43,neededEmployees:0,countEmployee:0,employees:[]}}function B(){return{id:Date.now()+Math.random(),name:"",position:""}}const F=()=>{r.value.shops.push(S())},T=o=>{r.value.shops[o].employees.push(B())},x=o=>{r.value.shops.splice(o,1)},j=(o,l)=>{r.value.shops[o].employees.splice(l,1)},J=[o=>!!o||"Номер телефона является обязательным",o=>o.replace(/\D/g,"").length===11||"Номер телефона должен быть корректным"];return(o,l)=>{const $=O("mask");return p(),R(G,{class:"pa-4","max-width":"800"},{default:t(()=>[e(A,{ref_key:"form",ref:v,modelValue:P(V),"onUpdate:modelValue":l[1]||(l[1]=d=>L(V)?V.value=d:V=d)},{default:t(()=>[e(i,null,{default:t(()=>[...l[2]||(l[2]=[s("mdi-city",-1)])]),_:1}),e(n,{modelValue:r.value.name,"onUpdate:modelValue":l[0]||(l[0]=d=>r.value.name=d),label:"Город",rules:[d=>!!d||"Введите название города"],required:""},null,8,["modelValue","rules"]),e(w,{class:"my-4"}),(p(!0),f(C,null,N(r.value.shops,(d,m)=>(p(),f("div",{key:d.id,class:"mb-6"},[e(E,{outlined:""},{default:t(()=>[e(H,{class:"d-flex justify-space-between align-center"},{default:t(()=>[_("div",null,[e(i,null,{default:t(()=>[...l[3]||(l[3]=[s("mdi-store",-1)])]),_:1}),s(" Магазин "+g(m+1),1)]),e(c,{icon:"",color:"red",onClick:a=>x(m),"aria-label":"Удалить магазин "+(m+1)},{default:t(()=>[e(i,null,{default:t(()=>[...l[4]||(l[4]=[s("mdi-close",-1)])]),_:1})]),_:1},8,["onClick","aria-label"])]),_:2},1024),e(K,null,{default:t(()=>[e(n,{modelValue:d.name,"onUpdate:modelValue":a=>d.name=a,label:"Название",rules:[a=>!!a||"Введите навание магазина"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),e(n,{modelValue:d.address,"onUpdate:modelValue":a=>d.address=a,label:"Название",rules:[a=>!!a||"Введите адрес магазина"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),e(n,{type:"number",modelValue:d.neededEmployees,"onUpdate:modelValue":a=>d.neededEmployees=a,label:"Необходимо сотрудников",rules:[a=>!!a||"Введите количество необходимых сотрудников"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),e(w,{class:"my-3"}),(p(!0),f(C,null,N(d.employees,(a,b)=>(p(),f("div",{key:a.id,class:"mb-4"},[e(E,{outlined:"",class:"pa-3"},{default:t(()=>[_("div",Q,[_("div",null,[e(i,null,{default:t(()=>[...l[5]||(l[5]=[s("mdi-account-tie",-1)])]),_:1}),s("Сотрудник "+g(b+1),1)]),e(c,{icon:"",color:"red",onClick:u=>j(m,b),"aria-label":"Удалить сотрудника "+(b+1)},{default:t(()=>[e(i,null,{default:t(()=>[...l[6]||(l[6]=[s("mdi-close",-1)])]),_:1})]),_:1},8,["onClick","aria-label"])]),e(n,{modelValue:a.firstName,"onUpdate:modelValue":u=>a.firstName=u,label:"Имя",rules:[u=>!!u||"Введите имя сотрудника"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),e(n,{modelValue:a.lastName,"onUpdate:modelValue":u=>a.lastName=u,label:"Фамилия",rules:[u=>!!u||"Введите фамилию сотрудника"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),e(n,{modelValue:a.middleName,"onUpdate:modelValue":u=>a.middleName=u,label:"Отчество",rules:[u=>!!u||"Введите отчество сотрудника"],required:""},null,8,["modelValue","onUpdate:modelValue","rules"]),z(e(n,{modelValue:a.phone,"onUpdate:modelValue":u=>a.phone=u,label:"Phone Number",rules:J,required:"",placeholder:"+7 (___) ___-__-__"},null,8,["modelValue","onUpdate:modelValue"]),[[$,"+7 (###) ###-##-##"]])]),_:2},1024)]))),128)),e(c,{color:"primary",text:"",onClick:a=>T(m)},{default:t(()=>[e(i,{left:""},{default:t(()=>[...l[7]||(l[7]=[s("mdi-plus",-1)])]),_:1}),l[8]||(l[8]=s(" Добавить сотрудника ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),e(c,{color:"primary",class:"mb-4",onClick:F},{default:t(()=>[e(i,{left:""},{default:t(()=>[...l[9]||(l[9]=[s("mdi-plus",-1)])]),_:1}),l[10]||(l[10]=s(" Добавить магазин ",-1))]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{I as default};
